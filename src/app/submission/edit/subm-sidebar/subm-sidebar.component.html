<aside class="left-side sidebar sidebar-offcanvas"
       [ngClass]="{'collapse-left' : collapsed}">

    <form novalidate
          #form="ngForm"
          (ngSubmit)="onSubmit(form)">
        <ul class="sidebar-menu">
            <li class="sidebar-item sidebar-edit-btn-item menu-toggle">
                <a (click)="onToggle($event)">
                    <button class="minimise-btn btn btn-primary btn-xs"
                            [ngClass]="{'inactive': !collapsed}">
                        <i class="fa fa-bars fa-fw"></i>
                    </button>
                </a>
            </li>
            <li class="sidebar-item type-control" *ngIf="!editing">
                <a (click)="onEditModeToggle($event)">
                    <strong class="fa-stack">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-pencil fa-stack-1x fa-inverse"></i>
                    </strong>
                    {{!collapsed ? '&nbsp;Edit types' : ''}}
                </a>
            </li>
            <li class="sidebar-item type-control" *ngIf="editing">
                <a (click)="onCancel($event)">
                    <i class="fa fa-fw fa fa-chevron-circle-left fa-lg"></i>
                    {{!collapsed ? '&nbsp;Cancel type edit' : ''}}
                </a>
            </li>
            <li class="sidebar-item" *ngFor="let item of items; let i = index">
                <a *ngIf="!editing" (click)="item.onClick($event)"
                   [tooltip]="item.label"
                   placement="right"
                   container="body">
                    <i class="fa fa-lg text-center {{item.feature.type.icon}}"></i>
                    {{!collapsed ? '&nbsp;&nbsp;Add ' + item.feature.typeName : ''}}
                </a>
                <div class="row-input"
                   [ngClass]="{'has-error': itemType.invalid && itemType.touched}"
                   *ngIf="editing && !item.isDeleted">
                    <label [hidden]="!itemType.errors?.unique || !itemType.touched"
                           class="control-label small">
                        Please use a unique type name
                    </label>
                    <label [hidden]="!itemType.errors?.required || !itemType.touched"
                           class="control-label small">
                        Please enter a type name
                    </label>
                    <span class="input-group">
                        <span class="input-group-addon">
                            <i class="fa fa-lg text-center {{item.feature.type.icon}}"></i>
                        </span>
                        <input type="text"
                               class="form-control input-sm form-control-auto"
                               [disabled]="item.isReadOnly()"
                               [ngModel]="item.feature.typeName"
                               name="{{item.feature.id}}"
                               #itemType="ngModel"
                               unique
                               validate-onblur
                               required />
                        <span class="input-group-btn">
                            <button class="item-delete btn btn-danger btn-sm btn-flat"
                                    [disabled]="item.isReadOnly()"
                                    tooltip="delete"
                                    (click)="onItemDelete($event, item.feature.id, form.controls, i)">
                                <i class="fa fa-trash-o fa-fw"></i>
                            </button>
                        </span>
                    </span>
                </div>
            </li>
            <li *ngIf="!editing" class="sidebar-item">
                <a (click)="onAddClick($event)">
                    <i class="fa fa-fw fa-plus-circle fa-lg"></i>
                    {{!collapsed ? '&nbsp;&nbsp;New type' : ''}}
                </a>
            </li>
            <li *ngIf="editing && !collapsed" class="row-submit">
                <button class="btn btn-primary btn-submit"
                        type="submit">
                    Save
                </button>
            </li>
        </ul>
    </form>
</aside>
<subm-add-dialog
        #addDialog
        [onAddType]="onAdd.bind(this)">
</subm-add-dialog>
<confirm-dialog #confirmDialog
                headerTitle="Delete items"
                confirmLabel="Delete">
</confirm-dialog>