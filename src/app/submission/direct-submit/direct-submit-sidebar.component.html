<aside class="left-side sidebar sidebar-offcanvas"
       [ngClass]="{'collapse-left' : collapsed}"
       *ngIf="!readonly">
    <ul class="sidebar-menu">
        <li class="sidebar-item menu-toggle">
            <a (click)="onToggle($event)">
                <i class="fa fa-bars fa-fw"></i>
                <span *ngIf="!collapsed">Minimise</span>
            </a>
        </li>
    </ul>
    <div *ngIf="!collapsed" style="margin: 5px;">
        <form id="subm-upload-form"
              class="col-sm-12"
              name="submUploadForm"
              novalidate
              role="form"
              method="post"
              (ngSubmit)="onSubmit($event)"
              #uploadForm="ngForm">


            <div class="form-group">
                <label>File</label>
                <file-upload-button class="show"
                                    title="Browse file..."
                                    (select)="onUploadFilesSelect($event)"></file-upload-button>

                <p class="form-text text-muted">{{fileName}}</p>

            </div>
            <div class="form-group">
                <label for="">Format</label>
                <select name="formatSelect"
                        class="form-control"
                        [(ngModel)]="model.format">
                    <option *ngFor="let format of formats" [value]="format.value" [selected]="model.format === format.value">
                        {{format.name}}
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="">Attach To</label>
                <ul *ngIf="model.projects.length > 0">
                    <li *ngFor="let p of model.projects">{{p}}</li>
                </ul>
                <p *ngIf="isLoading">Loading projects...</p>
                <multi-select
                        name="selectedProjects"
                        *ngIf="!isLoading"
                        [options]="projectsToAttachTo"
                        [(ngModel)]="model.projects"></multi-select>
            </div>
            <div>
                <!--span *ngIf="submitting"><i class="fa fa-spinner fa-spin"></i></span-->
                <!--button type="submit"
                        class="btn btn-primary btn-sm pull-right"
                        [disabled]="!canSubmit">Submit</button-->

                <div class="btn-group pull-right" dropdown>
                    <button id="single-button"
                            type="button"
                            class="btn btn-primary btn-sm"
                            [disabled]="!canSubmit"
                            dropdownToggle>
                        Submit as... <span class="caret"></span>
                    </button>
                    <ul *dropdownMenu role="menu" aria-labelledby="single-button" class="dropdown-menu">
                        <li role="menuitem"><a class="dropdown-item" (click)="onCreate()">New</a></li>
                        <li role="menuitem"><a class="dropdown-item" (click)="onUpdate()">Existing</a></li>
                    </ul>
                </div>
            </div>
        </form>
    </div>
</aside>