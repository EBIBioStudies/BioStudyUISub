<div class="row-offcanvas row-offcanvas-left">

   <subm-sidebar>
       <sidebar-item
               (click)="addAnnotation();"
               label="Describe your study"
               icon="fa-comment-o"></sidebar-item>
       <sidebar-item
               (click)="addFile();"
               label="Add a file"
               icon="fa-file-o"></sidebar-item>

       <sidebar-item
               (click)="addContact();"
               label="Add a contact"
               icon="fa-user"></sidebar-item>

       <sidebar-item
               (click)="addLink();"
               label="Add a link"
               icon="fa-link"></sidebar-item>

       <sidebar-item
               (click)="addPublication();"
               label="Add a publication"
               icon="fa-book"></sidebar-item>

       <sidebar-item
               (click)="onSubmit()"
               label="Submit"
               icon="fa-database"
               [disabled]="submForm.invalid"></sidebar-item>
   </subm-sidebar>

    <div class="container-fluid">

        <aside class="right-side content" [ngClass]="{'collapse-left' : uisettings.collapseLeftSide}">

            <form class="form-horizontal" id="subm-form" novalidate name="submForm" role="form" method="post"
                  (ngSubmit)="submForm.form.valid && onSubmit()" #submForm="ngForm">

            <div class="panel" [ngClass]="{'panel-danger': submForm.form.invalid, 'panel-info':submForm.form.valid}">
                <div class="panel-heading">
                    <span>Submission {{accno}}</span><span *ngIf="!readonly && submForm.form.invalid"> << There are some validation errors. Please correct them before to proceed to submit >> </span>
                    <div class="pull-right" *ngIf="readonly">
                        <a class="pull-right btn btn-success btn-xs" (click)="editSubmission()">Edit</a>
                    </div>
                </div>
                <div class="panel-body">

                        <div class="form-group row margin-bottom-small padding-right-15"
                             [ngClass]="{'has-error':title.invalid}">
                            <div class="col-sm-12 ">
                                <label class="control-label">Title
                                    <span *ngIf="title.errors">
                                        <span *ngIf="!title.pristine && title.errors.required">: cannot be blank</span>
                                        <span *ngIf="title.errors.minlength">: must be at least 50 characters</span>
                                    </span>
                                </label>
                                <input type="text" class="form-control" id="title" name="title"
                                       placeholder="Enter a title"
                                       [(ngModel)]="submission.title"
                                       [readonly]="readonly"
                                       minlength="50"
                                       required
                                       #title="ngModel">
                                <!--ng-model-options="{ allowInvalid: true }"-->
                            </div>
                        </div>

                        <div class="form-group row margin-bottom-small padding-right-15"
                             [ngClass]="{'has-error':releaseDate.invalid}">
                            <div class="col-sm-12">
                                <label class="control-label">Release date
                                    <span *ngIf="releaseDate.errors">
                                        <span *ngIf="!releaseDate.pristine && releaseDate.errors.required">: cannot be blank</span>
                                    </span>
                                </label>
                                <input type="date" class="form-control" id="releaseDate" name="releaseDate"
                                       [readonly]="readonly"
                                       [(ngModel)]="submission.releaseDate"
                                       required
                                       #releaseDate="ngModel">
                                           <!--ng-model-options="{ allowInvalid: true }"/-->
                            </div>
                        </div>

                        <div class="form-group row margin-bottom-small padding-right-15"
                             [ngClass]="{'has-error':description.invalid}">
                            <div class="col-sm-12">
                                <label class="control-label">Description
                                    <span *ngIf="description.errors">
                                        <span *ngIf="!description.pristine && description.errors.required">: cannot be blank</span>
                                        <span *ngIf="description.errors.minlength">: must be at least 50 characters</span>
                                    </span>
                                </label>
                                <textarea id="description" name="description" class="msd-elastic form-control input-sm"
                                          [(ngModel)]="submission.description"
                                          [readonly]="readonly"
                                          minlength="50"
                                          required
                                          #description="ngModel"></textarea>

<!--                                          ng-model-options="{ allowInvalid: true }"-->
                            </div>
                        </div>

                        <p></p>

                        <div class="col-lg-12 padding-left-none">
                            <subm-attributes-panel
                                    [attributes]="submission.annotations.items[0].attributes"
                                    [form]="submForm.form"
                                    [readonly]="readonly"
                                    type="annotation">
                            </subm-attributes-panel>

                            <!--subm-items-panel
                                    [items]="submission.contacts"
                                    [form]="submForm.form"
                                    type="contact"></subm-items-panel>

                            <subm-panel-items
                                    [(ngModel)]="submission.links"
                                    [form]="submForm.form"
                                    type="link"></subm-panel-items>

                            <subm-panel-items
                                    [(ngModel)]="submission.files"
                                    [form]="submForm.form"
                                    type="file"></subm-panel-items>

                            <subm-panel-items
                                    [(ngModel)]="submission.publications"
                                    [form]="submForm.form"
                                    type="publication"></subm-panel-items-->
                        </div>
                        <div>
                            <button type="submit" class="btn btn-primary btn-lg"
                                    *ngIf="!readonly && !submForm.invalid">Submit
                            </button>
                        </div>
                </div>
            </div>

            </form>
        </aside>
    </div>
    <!-- /.right-side -->
</div>